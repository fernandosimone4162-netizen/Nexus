<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nexus</title>
<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#000;
    color:#fff;
}
.tabs{
    display:flex;
    gap:10px;
    padding:10px;
}
.tab{
    flex:1;
    background:#111;
    padding:10px;
    text-align:center;
    border-radius:8px;
    cursor:pointer;
}
.tab.active{
    background:#1db954;
    color:#000;
}
.section{
    display:none;
    padding:15px;
}
.section.active{display:block;}
input,button{
    width:100%;
    padding:10px;
    margin-top:8px;
    border-radius:6px;
    border:none;
}
button{
    background:#1db954;
    font-weight:bold;
}
.list{
    margin-top:15px;
}
.item{
    background:#111;
    padding:10px;
    border-radius:6px;
    margin-top:8px;
}
.delete{
    background:#b00020;
    margin-top:5px;
}
.total{
    margin-top:15px;
    font-weight:bold;
    text-align:right;
}
</style>
</head>
<body>

<div class="tabs">
    <div class="tab active" onclick="openTab('vendas')">Vendas</div>
    <div class="tab" onclick="openTab('compras')">Fornecedores</div>
    <div class="tab" onclick="openTab('histVendas')">Hist. Vendas</div>
    <div class="tab" onclick="openTab('histCompras')">Hist. Compras</div>
</div>

<!-- VENDAS -->
<div id="vendas" class="section active">
    <input id="cliente" placeholder="Nome do cliente">
    <input id="prodV" placeholder="Produto">
    <input id="qtdV" type="number" placeholder="Quantidade">
    <input id="precoV" type="number" placeholder="Preço unitário">
    <button onclick="addItemVenda()">Adicionar item</button>
    <div id="listaVenda"></div>
    <button onclick="finalizarVenda()">Finalizar venda</button>
</div>

<!-- COMPRAS -->
<div id="compras" class="section">
    <input id="fornecedor" placeholder="Nome do fornecedor">
    <input id="prodC" placeholder="Produto">
    <input id="qtdC" type="number" placeholder="Quantidade">
    <input id="precoC" type="number" placeholder="Preço unitário">
    <button onclick="addItemCompra()">Adicionar item</button>
    <div id="listaCompra"></div>
    <button onclick="finalizarCompra()">Finalizar compra</button>
</div>

<!-- HISTÓRICOS -->
<div id="histVendas" class="section">
    <div id="histVendaList"></div>
    <div class="total" id="totalVendas"></div>
</div>

<div id="histCompras" class="section">
    <div id="histCompraList"></div>
    <div class="total" id="totalCompras"></div>
</div>

<script>
let vendaAtual=[], compraAtual=[];
let histVendas=[], histCompras=[];

function openTab(id){
    document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    event.target.classList.add('active');
}

function addItemVenda(){
    let p=prodV.value,q=qtdV.value,pr=precoV.value;
    if(!p||!q||!pr) return;
    vendaAtual.push({p,q,pr});
    renderTemp('listaVenda',vendaAtual);
    prodV.value=qtdV.value=precoV.value='';
}

function addItemCompra(){
    let p=prodC.value,q=qtdC.value,pr=precoC.value;
    if(!p||!q||!pr) return;
    compraAtual.push({p,q,pr});
    renderTemp('listaCompra',compraAtual);
    prodC.value=qtdC.value=precoC.value='';
}

function renderTemp(el,list){
    document.getElementById(el).innerHTML=list.map(i=>`${i.p} - ${i.q} x ${i.pr}`).join('<br>');
}

function finalizarVenda(){
    let total=vendaAtual.reduce((s,i)=>s+i.q*i.pr,0);
    histVendas.push({cliente:cliente.value,itens:vendaAtual,total,data:new Date()});
    vendaAtual=[]; cliente.value='';
    document.getElementById('listaVenda').innerHTML='';
    renderHist();
}

function finalizarCompra(){
    let total=compraAtual.reduce((s,i)=>s+i.q*i.pr,0);
    histCompras.push({fornecedor:fornecedor.value,itens:compraAtual,total,data:new Date()});
    compraAtual=[]; fornecedor.value='';
    document.getElementById('listaCompra').innerHTML='';
    renderHist();
}

function renderHist(){
    let tv=0,tc=0;
    histVendaList.innerHTML=histVendas.map((v,i)=>{
        tv+=v.total;
        return `<div class="item">
        ${v.cliente} | ${v.data.toLocaleString()}<br>Total: R$ ${v.total.toFixed(2)}
        <button class="delete" onclick="histVendas.splice(${i},1);renderHist()">Excluir</button>
        </div>`;
    }).join('');
    histCompraList.innerHTML=histCompras.map((c,i)=>{
        tc+=c.total;
        return `<div class="item">
        ${c.fornecedor} | ${c.data.toLocaleString()}<br>Total: R$ ${c.total.toFixed(2)}
        <button class="delete" onclick="histCompras.splice(${i},1);renderHist()">Excluir</button>
        </div>`;
    }).join('');
    totalVendas.innerText=`Total do mês: R$ ${tv.toFixed(2)}`;
    totalCompras.innerText=`Total do mês: R$ ${tc.toFixed(2)}`;
}
</script>

</body>
</html>
